<div class="container-sivimss px-5 registro-en-linea my-5">
    <app-titulo-principal titulo="REGISTRO DE PERSONA DEL GRUPO">
        <app-btn-regresar routerLink="../"></app-btn-regresar>
    </app-titulo-principal>
    <form [formGroup]="form" #formPrincipal>
        <div class="border-panel mb-5">
            <ng-container formGroupName="datosPersonales">
                <h2 class="subtitulo-base">Datos personales</h2>
                <div class="row mb-3">
                    <div class="col-md-3">
                        <label class="control-label" for="matricula">Matrícula:</label>
                        <input id="matricula" type="text" class="form-control" formControlName="matricula"
                            placeholder="Ingresa matrícula">
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="rfc">R.F.C.:</label>
                        <input id="rfc" type="text" class="form-control" formControlName="rfc"
                            placeholder="Ingresa R.F.C.">
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="curp">CURP <span class="req">*</span>:</label>
                        <input id="curp" type="text" class="form-control" formControlName="curp"
                            placeholder="Ingresa CURP">
                        <span class="campo-obligatorio"
                            *ngIf="datosPersonales.curp?.errors?.required && (datosPersonales.curp?.dirty || datosPersonales.curp?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="nombre">Nombre <span class="req">*</span>:</label>
                        <input id="nombre" type="text" class="form-control" formControlName="nombre"
                            placeholder="Ingresa nombre">
                        <span class="campo-obligatorio"
                            *ngIf="datosPersonales.nombre?.errors?.required && (datosPersonales.nombre?.dirty || datosPersonales.nombre?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-3">
                        <label class="control-label" for="primerApellido">Primer apellido <span
                                class="req">*</span>:</label>
                        <input id="primerApellido" type="text" class="form-control" formControlName="primerApellido"
                            placeholder="Ingresa primer apellido">
                        <span class="campo-obligatorio"
                            *ngIf="datosPersonales.primerApellido?.errors?.required && (datosPersonales.primerApellido?.dirty || datosPersonales.primerApellido?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="segundoApellido">Segundo apellido <span
                                class="req">*</span>:</label>
                        <input id="segundoApellido" type="text" class="form-control" formControlName="segundoApellido"
                            placeholder="Ingresa segundo apellido">
                        <span class="campo-obligatorio"
                            *ngIf="datosPersonales.segundoApellido?.errors?.required && (datosPersonales.segundoApellido?.dirty || datosPersonales.segundoApellido?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="sexo">Sexo<span class="req">*</span>:</label>
                        <p-dropdown id="sexo" class="form-control" formControlName="sexo" placeholder="Selecciona sexo"
                            [options]="dummyDropdown" [filter]="true" filterBy="label"></p-dropdown>
                        <span class="campo-obligatorio"
                            *ngIf="datosPersonales.sexo?.errors?.required && (datosPersonales.sexo?.dirty || datosPersonales.sexo?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="otro">Otro:</label>
                        <input id="otro" type="text" class="form-control" formControlName="otro"
                            placeholder="Ingresa otro">
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-3">
                        <label class="control-label" for="lugarNacimiento">Lugar de nacimiento<span
                                class="req">*</span>:</label>
                        <p-dropdown id="lugarNacimiento" class="form-control" formControlName="lugarNacimiento"
                            placeholder="Selecciona lugar nacimiento" [options]="dummyDropdown" [filter]="true"
                            filterBy="label">
                        </p-dropdown>
                        <span class="campo-obligatorio"
                            *ngIf="datosPersonales.lugarNacimiento?.errors?.required && (datosPersonales.lugarNacimiento?.dirty || datosPersonales.lugarNacimiento?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="fechaNacimiento">Fecha de nacimiento<span
                                class="req">*</span>:</label>
                        <p-calendar id="fechaNacimiento" styleClass="form-control" formControlName="fechaNacimiento"
                            [showIcon]="true" dateFormat="dd/mm/yy" placeholder="Ingresa fecha de nacimiento"
                            [maxDate]="fechaActual">
                        </p-calendar>
                        <span class="campo-obligatorio"
                            *ngIf="datosPersonales.fechaNacimiento?.errors?.required && (datosPersonales.fechaNacimiento?.dirty || datosPersonales.fechaNacimiento?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                </div>
            </ng-container>
            <ng-container formGroupName="domicilio">
                <h2 class="subtitulo-base">Domicilio</h2>
                <div class="row mb-3">
                    <div class="col-md-3">
                        <label class="control-label" for="codigoPostal">C.P. <span class="req">*</span>:</label>
                        <input id="codigoPostal" type="text" class="form-control" formControlName="codigoPostal"
                            placeholder="Ingresa código postal">
                        <span class="campo-obligatorio"
                            *ngIf="domicilio.codigoPostal?.errors?.required && (domicilio.codigoPostal?.dirty || domicilio.codigoPostal?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="asentamientoColonia">Asentamiento / Colonia <span
                                class="req">*</span>:</label>
                        <input id="asentamientoColonia" type="text" class="form-control"
                            formControlName="asentamientoColonia" placeholder="Ingresa asentamiento colonia">
                        <span class="campo-obligatorio"
                            *ngIf="domicilio.asentamientoColonia?.errors?.required && (domicilio.asentamientoColonia?.dirty || domicilio.asentamientoColonia?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="municipio">Municipio <span class="req">*</span>:</label>
                        <input id="municipio" type="text" class="form-control" formControlName="municipio"
                            placeholder="Ingresa municipio">
                        <span class="campo-obligatorio"
                            *ngIf="domicilio.municipio?.errors?.required && (domicilio.municipio?.dirty || domicilio.municipio?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="estado">Estado <span class="req">*</span>:</label>
                        <input id="estado" type="text" class="form-control" formControlName="estado"
                            placeholder="Ingresa estado">
                        <span class="campo-obligatorio"
                            *ngIf="domicilio.estado?.errors?.required && (domicilio.estado?.dirty || domicilio.estado?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-3">
                        <label class="control-label" for="pais">País <span class="req">*</span>:</label>
                        <input id="pais" type="text" class="form-control" formControlName="pais"
                            placeholder="Ingresa país">
                        <span class="campo-obligatorio"
                            *ngIf="domicilio.pais?.errors?.required && (domicilio.pais?.dirty || domicilio.pais?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="calle">Calle <span class="req">*</span>:</label>
                        <input id="calle" type="text" class="form-control" formControlName="calle"
                            placeholder="Ingresa calle">
                        <span class="campo-obligatorio"
                            *ngIf="domicilio.calle?.errors?.required && (domicilio.calle?.dirty || domicilio.calle?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="numeroExterior">Número exterior <span
                                class="req">*</span>:</label>
                        <input id="numeroExterior" type="text" class="form-control" formControlName="numeroExterior"
                            placeholder="Ingresa número exterior">
                        <span class="campo-obligatorio"
                            *ngIf="domicilio.numeroExterior?.errors?.required && (domicilio.numeroExterior?.dirty || domicilio.numeroExterior?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="numeroInterior">Número interior:</label>
                        <input id="numeroInterior" type="text" class="form-control" formControlName="numeroInterior"
                            placeholder="Ingresa número interior">
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-3">
                        <label class="control-label" for="correoElectronico">Correo electrónico <span
                                class="req">*</span>:</label>
                        <input id="correoElectronico" type="text" class="form-control"
                            formControlName="correoElectronico" placeholder="Ingresa correo electrónico">
                        <span class="campo-obligatorio"
                            *ngIf="domicilio.correoElectronico?.errors?.required && (domicilio.correoElectronico?.dirty || domicilio.correoElectronico?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="telefono">Teléfono <span class="req">*</span>:</label>
                        <input id="telefono" type="text" class="form-control" formControlName="telefono"
                            placeholder="Ingresa teléfono">
                        <span class="campo-obligatorio"
                            *ngIf="domicilio.telefono?.errors?.required && (domicilio.telefono?.dirty || domicilio.telefono?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="enfermedadPrexistente">Enfermedad prexistente:</label>
                        <p-dropdown id="enfermedadPrexistente" class="form-control"
                            formControlName="enfermedadPrexistente" placeholder="Selecciona enfermedad prexistente"
                            [options]="dummyDropdown" [filter]="true" filterBy="label">
                        </p-dropdown>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="otro">Otro:</label>
                        <input id="otro" type="text" class="form-control" formControlName="otro"
                            placeholder="Ingresa otro">
                    </div>
                </div>
            </ng-container>
        </div>


        <div class="border-panel mb-5">
            <h2 class="subtitulo-base">Beneficiarios</h2>
            <p-table styleClass="mt-5 mb-8" [value]="beneficiarios" [resizableColumns]="true"
                [columnResizeMode]="'expand'">
                <ng-template pTemplate="header">
                    <tr>
                        <th style="width: 4rem">
                            <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                        </th>
                        <th scope="col">Velatorio</th>
                        <th scope="col">Fecha</th>
                        <th scope="col">Nombre</th>
                        <th scope="col">Primer apellido</th>
                        <th scope="col">Segundo apellido</th>
                        <th scope="col">Edad</th>
                        <th scope="col">Parentesco</th>
                        <th scope="col">CURP</th>
                        <th scope="col">RFC</th>
                        <th scope="col">Acta nacimiento</th>
                        <th scope="col">Correo electrónico</th>
                        <th scope="col">Teléfono</th>
                        <th scope="col" style="width: 40px; border-left: 1px solid #b0b0b0;"></th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-convenio>
                    <tr>
                        <td>
                            <p-tableCheckbox [value]="convenio.id"></p-tableCheckbox>
                        </td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td style="border-left: 1px solid #b0b0b0;">
                            <div class="contenedor-celda-iconos">
                                <a (click)="abrirPanel($event)" onCloseOnNavigation>
                                    <i class="pi pi-ellipsis-v"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>


        <div class="border-panel mb-5">
            <h2 class="subtitulo-base">Paquetes</h2>
            <ng-container formGroupName="paquetes">
                <div class="paquetes">
                    <div class="paquete">
                        <div class="paquete-titulo">
                            <p-checkbox formControlName="paqueteEconomico" [binary]="true"></p-checkbox>
                            <span>1. Paquete Económico</span>
                        </div>
                        <div>
                            <ul>
                                <li>Recolección y traslado del cuerpo (hasta 100 km en la misma entidad federativa)
                                </li>
                                <li>
                                    Capilla en velatorio o en domicilio (hasta 24 horas)
                                </li>
                                <li>
                                    Apoyo para trámites
                                </li>
                                <li>
                                    Arreglo estético del cuerpo y embalsamamiento (en caso de ser necesario)
                                </li>
                                <li>
                                    No se incluye ataúd.
                                </li>
                            </ul>
                            <div class="iconos">
                                <img src="assets/images/sivimss-externos/material-symbols_candle.svg" alt="">
                                <img src="assets/images/sivimss-externos/material-symbols_candle-2.svg" alt="">
                                <img src="assets/images/sivimss-externos/material-symbols_candle-2.svg" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="paquete">
                        <div class="paquete-titulo">
                            <p-checkbox formControlName="paqueteBasico" [binary]="true"></p-checkbox>
                            <span>1. Paquete Básico</span>
                        </div>
                        <div>
                            <ul>
                                <li>Recolección y traslado del cuerpo (hasta 100 km en la misma entidad federativa)
                                </li>
                                <li>
                                    Capilla en velatorio o en domicilio (hasta 24 horas)
                                </li>
                                <li>
                                    Apoyo para trámites
                                </li>
                                <li>
                                    Arreglo estético del cuerpo y embalsamamiento (en caso de ser necesario)
                                </li>
                                <li>
                                    Ataúd nuevo Básico
                                    <ul>
                                        <li>De acuerdo con la normatividad vigente que aplique para los Velatorios
                                            IMSS para el
                                            otorgamiento
                                            de servicios funerarios.</li>
                                    </ul>
                                </li>
                            </ul>
                            <div class="iconos">
                                <img src="assets/images/sivimss-externos/material-symbols_candle.svg" alt="">
                                <img src="assets/images/sivimss-externos/material-symbols_candle.svg" alt="">
                                <img src="assets/images/sivimss-externos/material-symbols_candle-2.svg" alt="">
                            </div>
                        </div>
                    </div>

                    <div class="paquete">
                        <div class="paquete-titulo">
                            <p-checkbox formControlName="paqueteCremacion" [binary]="true"></p-checkbox>
                            <span>1. Paquete con Cremación</span>
                        </div>
                        <div>
                            <ul>
                                <li>Recolección y traslado del cuerpo (hasta 100 km en la misma entidad federativa)
                                </li>
                                <li>
                                    Capilla en velatorio o en domicilio (hasta 24 horas)
                                </li>
                                <li>
                                    Apoyo para trámites
                                </li>
                                <li>
                                    Arreglo estético del cuerpo y embalsamamiento (en caso de ser necesario)
                                </li>
                                <li>
                                    Ataúd nuevo Básico
                                    <ul>
                                        <li>De acuerdo con la normatividad vigente que aplique para los Velatorios
                                            IMSS para el
                                            otorgamiento
                                            de servicios funerarios.</li>
                                        <li>
                                            La cremación únicamente aplica para los velatorios indicados en el
                                            “ANEXO C”.
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    En dicho paquete no se incluye la urna para cenizas.
                                </li>
                            </ul>
                            <div class="iconos">
                                <img src="assets/images/sivimss-externos/material-symbols_candle.svg" alt="">
                                <img src="assets/images/sivimss-externos/material-symbols_candle.svg" alt="">
                                <img src="assets/images/sivimss-externos/material-symbols_candle.svg" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </ng-container>
        </div>

        <div class="border-panel mb-5">
            <div class="row mb-5">
                <div class="col-md-2 flex flex-column">
                    <span class="etiqueta-base font-bold">Folio único del convenio</span>
                    <span class="texto-base font-normal">DOC-CRE-6-2</span>
                </div>
                <div class="col-md-2 flex flex-column">
                    <span class="etiqueta-base font-bold">Nombre completo</span>
                    <span class="texto-base font-normal">Nombre Apellido Apellido</span>
                </div>
                <div class="col-md-2 flex flex-column">
                    <span class="etiqueta-base font-bold">Delegación</span>
                    <span class="texto-base font-normal">Nombre de la delegación</span>
                </div>
                <div class="col-md-2 flex flex-column">
                    <span class="etiqueta-base font-bold">Velatorio</span>
                    <span class="texto-base font-normal">Nombre del velatorio</span>
                </div>
                <div class="col-md-2 flex flex-column">
                    <span class="etiqueta-base font-bold">Fecha</span>
                    <span class="texto-base font-normal">00-00-0000</span>
                </div>
            </div>
            <div class="row mb-8">
                <div class="col-md-2">
                    <label class="control-label" for="archivoXml">INE afiliado:</label>
                    <div (click)="handleClick('archivoXml', 'xml')" class="file-container">
                        <input class="hidden" type="file" id="upload-file-xml" name="upload-file-xml" accept=".xml"
                            ngf-max-size="2MB" (change)="addAttachment($event)">
                        <input id="archivoXml" class="form-control">
                        <img src="assets/images/imagen-icono-file-upload.svg" class="ms" alt="icono ver">
                    </div>
                </div>

                <div class="col-md-2">
                    <label class="control-label" for="archivoXml">Copia CURP:</label>
                    <div (click)="handleClick('archivoXml', 'xml')" class="file-container">
                        <input class="hidden" type="file" id="upload-file-xml" name="upload-file-xml" accept=".xml"
                            ngf-max-size="2MB" (change)="addAttachment($event)">
                        <input id="archivoXml" class="form-control">
                        <img src="assets/images/imagen-icono-file-upload.svg" class="ms" alt="icono ver">
                    </div>
                </div>

                <div class="col-md-2">
                    <label class="control-label" for="archivoXml">Copia RFC:</label>
                    <div (click)="handleClick('archivoXml', 'xml')" class="file-container">
                        <input class="hidden" type="file" id="upload-file-xml" name="upload-file-xml" accept=".xml"
                            ngf-max-size="2MB" (change)="addAttachment($event)">
                        <input id="archivoXml" class="form-control">
                        <img src="assets/images/imagen-icono-file-upload.svg" class="ms" alt="icono ver">
                    </div>
                </div>

                <div class="col-md-2">
                    <label class="control-label" for="archivoXml">Acta de nacimiento beneficiario:</label>
                    <div (click)="handleClick('archivoXml', 'xml')" class="file-container">
                        <input class="hidden" type="file" id="upload-file-xml" name="upload-file-xml" accept=".xml"
                            ngf-max-size="2MB" (change)="addAttachment($event)">
                        <input id="archivoXml" class="form-control">
                        <img src="assets/images/imagen-icono-file-upload.svg" class="ms" alt="icono ver">
                    </div>
                </div>

                <div class="col-md-2">
                    <label class="control-label" for="archivoXml">INE Beneficiario:</label>
                    <div (click)="handleClick('archivoXml', 'xml')" class="file-container">
                        <input class="hidden" type="file" id="upload-file-xml" name="upload-file-xml" accept=".xml"
                            ngf-max-size="2MB" (change)="addAttachment($event)">
                        <input id="archivoXml" class="form-control">
                        <img src="assets/images/imagen-icono-file-upload.svg" class="ms" alt="icono ver">
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-3 mb-3">
            <span class="texto-base font-normal">*Campos obligatorios</span>
        </div>
        <div class="row">
            <div class="col-md-12 flex justify-content-end align-items-center">
                <button class="btn btn-gold btn-md">Cancelar</button>
                <button class="btn btn-primary btn-md ml-4">Guardar</button>
            </div>
        </div>
    </form>
</div>

<p-overlayPanel #overlayPanel [appendTo]="formPrincipal">
    <ng-template pTemplate="content">
        <app-overlay-panel-opciones>
            <app-overlay-panel-opcion titulo="Registrar" (click)="abrirModalRegistroBeneficiario($event)">
            </app-overlay-panel-opcion>
            <app-overlay-panel-opcion titulo="Editar" (click)="abrirModalEditarBeneficiario($event)">
            </app-overlay-panel-opcion>
            <app-overlay-panel-opcion titulo="Desactivar" (click)="abrirModalDesactivarBeneficiario($event)">
            </app-overlay-panel-opcion>
        </app-overlay-panel-opciones>
    </ng-template>
</p-overlayPanel>


<p-dialog [(visible)]="mostrarModalTipoArchivoIncorrecto" [modal]="true" [style]="{maxWidth:'544px',width: '100%'}"
    [closable]="false" [draggable]="false" [resizable]="false" header="Órdenes">
    <ng-template pTemplate="content">
        <div>
            <p class="text-center"><b>Tipo de archivo incorrecto.</b></p>
            <p class="mt-2 text-center">Si tienes dudas puedes asistir a tu Velatorio más cercano</p>
        </div>
    </ng-template>
    <ng-template pTemplate="footer">
        <div class="flex justify-content-center">
            <button class="btn btn-primary btn-md" (click)="mostrarModalTipoArchivoIncorrecto = false;">Aceptar</button>
        </div>
    </ng-template>
</p-dialog>


<p-dialog [(visible)]="mostrarModalConfirmacionInformacionCapturada" [modal]="true"
    [style]="{maxWidth:'544px',width: '100%'}" [closable]="false" [draggable]="false" [resizable]="false"
    header="Órdenes">
    <ng-template pTemplate="content">
        <div>
            <p class="mt-2 text-center">¿Estás seguro de guardar la información capturada para tu convenio de Previsión
                Funeraria?</p>
        </div>
    </ng-template>
    <ng-template pTemplate="footer">
        <div class="flex justify-content-center">
            <button class="btn btn-gold btn-md"
                (click)="mostrarModalConfirmacionInformacionCapturada = false;">Cancelar</button>
            <button class="btn btn-primary btn-md ml-4"
                (click)="mostrarModalConfirmacionInformacionCapturada = false;">Aceptar</button>
        </div>
    </ng-template>
</p-dialog>

<p-dialog [(visible)]="mostrarModalValidacionRegistro" [modal]="true" [style]="{maxWidth:'544px',width: '100%'}"
    [closable]="false" [draggable]="false" [resizable]="false" header="Órdenes">
    <ng-template pTemplate="content">
        <div>
            <p class="mt-2 text-center">El registro de contratación de una previsión funeraria deberá ser validado por
                el área
                responsable. Acude a tu velatorio más cercano por tu contrato</p>
        </div>
    </ng-template>
    <ng-template pTemplate="footer">
        <div class="flex justify-content-center">
            <button class="btn btn-primary btn-md ml-4"
                (click)="mostrarModalValidacionRegistro = false;">Aceptar</button>
        </div>
    </ng-template>
</p-dialog>