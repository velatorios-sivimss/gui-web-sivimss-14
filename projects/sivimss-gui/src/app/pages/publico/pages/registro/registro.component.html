<div class="container-sivimss px-5 registro-en-linea my-5">
    <app-titulo-principal titulo="REGISTRARSE EN LÍNEA"></app-titulo-principal>
    <div class="flex justify-content-end align-items-center mb-5">
        <span>¿Tienes cuenta?</span>
        <button class="btn btn-primary btn-sm ml-5" routerLink="../autenticacion/inicio-sesion">Iniciar sesión</button>
    </div>

    <form [formGroup]="form">
        <div class="border-panel mb-5">
            <ng-container formGroupName="datosGenerales">
                <h2 class="subtitulo-base">Datos generales</h2>
                <div class="row mb-3">
                    <div class="col-md-3">
                        <label class="control-label" for="curp">CURP<span class="req">*</span>:</label>
                        <input id="curp" type="text" class="form-control" formControlName="curp" alphanumericOnly
                            trimmer (blur)="validarCurp();" oninput="this.value = this.value.toUpperCase()"
                            maxlength="18" placeholder="Ingresa curp">
                        <span class="campo-obligatorio"
                            *ngIf="datosGenerales.curp?.errors?.required  && (datosGenerales.curp?.dirty || datosGenerales.curp?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="nss">NSS:</label>
                        <input id="nss" type="text" class="form-control" formControlName="nss" placeholder="Ingresa nss"
                            maxlength="11">
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="rfc">R.F.C.<span class="req">*</span>:</label>
                        <input id="rfc" type="text" class="form-control" formControlName="rfc" placeholder="Ingresa rfc"
                            maxlength="13" trimmer folioOdsAlphanumeric (blur)="validarRfc()">
                        <span class="campo-obligatorio"
                            *ngIf="datosGenerales.rfc?.errors?.required  && (datosGenerales.rfc?.dirty || datosGenerales.rfc?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="nombre">Nombre(s)<span class="req">*</span>:</label>
                        <input id="nombre" type="text" class="form-control" formControlName="nombre"
                            placeholder="Ingresa nombre" maxlength="30" trimmer alphanumericOnly>
                        <span class="campo-obligatorio"
                            *ngIf="datosGenerales.nombre?.errors?.required && (datosGenerales.nombre?.dirty || datosGenerales.nombre?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-3">
                        <label class="control-label" for="primerApellido">Primer apellido<span
                                class="req">*</span>:</label>
                        <input id="primerApellido" type="text" class="form-control" formControlName="primerApellido"
                            placeholder="Ingresa primer apellido" maxlength="20" trimmer alphanumericOnly>
                        <span class="campo-obligatorio"
                            *ngIf="datosGenerales.primerApellido?.errors?.required && (datosGenerales.primerApellido?.dirty || datosGenerales.primerApellido?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="segundoApellido">Segundo apellido<span
                                class="req">*</span>:</label>
                        <input id="segundoApellido" type="text" class="form-control" formControlName="segundoApellido"
                            placeholder="Ingresa segundo apellido" maxlength="20" trimmer alphanumericOnly>
                        <span class="campo-obligatorio"
                            *ngIf="datosGenerales.segundoApellido?.errors?.required && (datosGenerales.segundoApellido?.dirty || datosGenerales.segundoApellido?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="fechaNacimiento">Fecha de nacimiento<span
                                class="req">*</span>:</label>
                        <p-calendar id="fechaNacimiento" styleClass="form-control" formControlName="fechaNacimiento"
                            [showIcon]="true" dateFormat="dd/mm/yy" placeholder="Ingresa fecha de nacimiento"
                            [maxDate]="fechaActual"></p-calendar>
                        <span class="campo-obligatorio"
                            *ngIf="datosGenerales.fechaNacimiento?.errors?.required && (datosGenerales.fechaNacimiento?.dirty || datosGenerales.fechaNacimiento?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-3">
                        <label class="control-label" for="sexo">Sexo<span class="req">*</span>:</label>
                        <p-dropdown id="sexo" class="form-control" formControlName="sexo" placeholder="Selecciona sexo"
                            (onChange)="cambioTipoSexo()" [options]="tipoSexo" [filter]="true"
                            filterBy="label"></p-dropdown>
                        <span class="campo-obligatorio"
                            *ngIf="datosGenerales.sexo?.errors?.required && (datosGenerales.sexo?.dirty || datosGenerales.sexo?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3" *ngIf="datosGenerales.sexo.value === 3">
                        <label class="control-label" for="otro">Otro:</label>
                        <input id="otro" type="text" class="form-control" formControlName="otro"
                            placeholder="Ingresa otro" maxlength="10">
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="nacionalidad">Nacionalidad:</label>
                        <p-dropdown id="nacionalidad" class="form-control" formControlName="nacionalidad" (onChange)="cambioNacionalidad()"
                            placeholder="Selecciona nacionalidad" [options]="nacionalidad" [filter]="true"
                            filterBy="label"></p-dropdown>
                    </div>
                    <div class="col-md-3" *ngIf="datosGenerales.nacionalidad.value === 2">
                        <label class="control-label" for="paisNacimiento">Pais de nacimiento:</label>
                        <p-dropdown id="paisNacimiento" class="form-control" formControlName="paisNacimiento"
                            placeholder="Selecciona país de nacimiento" [options]="catalogoPaises" [filter]="true"
                            filterBy="label"></p-dropdown>
                    </div>
                    <div class="col-md-3" *ngIf="datosGenerales.nacionalidad.value === 1">
                        <label class="control-label" for="lugarNacimiento">Lugar de nacimiento<span class="req">*</span>:</label>
                        <p-dropdown id="lugarNacimiento" class="form-control" formControlName="lugarNacimiento"
                            placeholder="Selecciona lugar de nacimiento" [options]="catalogoEstados" [filter]="true"
                            filterBy="label"></p-dropdown>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-3">
                        <label class="control-label" for="telefono">Teléfono<span class="req">*</span>:</label>
                        <input id="telefono" type="text" class="form-control" formControlName="telefono"
                            placeholder="Ingresa telefono" trimmer numbersOnly maxlength="10">
                        <span class="campo-obligatorio"
                            *ngIf="datosGenerales.telefono?.errors?.required && (datosGenerales.telefono?.dirty || datosGenerales.telefono?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="correo">Correo<span class="req">*</span>:</label>
                        <input id="correo" type="text" class="form-control" formControlName="correo"
                            (blur)="validarEmail()" placeholder="Ingresa correo" maxlength="45" trimmer>
                        <span class="campo-obligatorio"
                            *ngIf="datosGenerales.correo?.errors?.required && (datosGenerales.correo?.dirty || datosGenerales.correo?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="correoConfirmacion">Confirmar correo<span
                                class="req">*</span>:</label>
                        <input id="correoConfirmacion" type="text" class="form-control"
                            formControlName="correoConfirmacion" placeholder="Confirmar correo" (blur)="validarEmail()"
                            maxlength="45" trimmer>
                        <span class="campo-obligatorio"
                            *ngIf="datosGenerales.correoConfirmacion?.errors?.required && (datosGenerales.correoConfirmacion?.dirty || datosGenerales.correoConfirmacion?.touched)">Este
                            campo es obligatorio *.</span>
                        <span class="validacion-contrasenias campo-obligatorio" *ngIf="form.errors?.correosDiferentes">
                            Los correos ingresados no coinciden.</span>
                    </div>
                </div>
            </ng-container>
        </div>
        <div class="border-panel">
            <ng-container formGroupName="domicilio">
                <h2 class="subtitulo-base">Domicilio</h2>
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label class="control-label" for="calle">Calle<span class="req">*</span>:</label>
                        <input id="calle" type="text" class="form-control" formControlName="calle"
                            placeholder="Ingresa calle" maxlength="30" trimmer textOnly>
                        <span class="campo-obligatorio"
                            *ngIf="domicilio.calle?.errors?.required  && (domicilio.calle?.dirty || domicilio.calle?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="numeroExterior">Número exterior<span
                                class="req">*</span>:</label>
                        <input id="numeroExterior" type="text" class="form-control" formControlName="numeroExterior"
                            placeholder="Ingresa número exterior" maxlength="10" trimmer alphanumericOnly>
                        <span class="campo-obligatorio"
                            *ngIf="domicilio.numeroExterior?.errors?.required  && (domicilio.numeroExterior?.dirty || domicilio.numeroExterior?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="numeroInterior">Número interior:</label>
                        <input id="numeroInterior" type="text" class="form-control" formControlName="numeroInterior"
                            placeholder="Ingresa número interior" maxlength="10" trimmer alphanumericOnly>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-3">
                        <label class="control-label" for="codigoPostal">C.P.<span class="req">*</span>:</label>
                        <input id="codigoPostal" type="text" class="form-control" formControlName="codigoPostal"
                            placeholder="Ingresa C.P." maxlength="5" trimmer numbersOnly (blur)="obtenerCP()">
                        <span class="campo-obligatorio"
                            *ngIf="domicilio.codigoPostal?.errors?.required  && (domicilio.codigoPostal?.dirty || domicilio.codigoPostal?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="colonia">Colonia<span class="req">*</span>:</label>
                        <p-dropdown id="colonia" class="form-control" formControlName="colonia"
                            placeholder="Selecciona colonia" [options]="colonias" [filter]="true"
                            filterBy="label"></p-dropdown>
                        <span class="campo-obligatorio"
                            *ngIf="domicilio.colonia?.errors?.required  && (domicilio.colonia?.dirty || domicilio.colonia?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="municipio">Municipio<span class="req">*</span>:</label>
                        <input id="municipio" type="text" class="form-control" formControlName="municipio"
                            placeholder="ingresa municipio">
                        <span class="campo-obligatorio"
                            *ngIf="domicilio.municipio?.errors?.required  && (domicilio.municipio?.dirty || domicilio.municipio?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                    <div class="col-md-3">
                        <label class="control-label" for="estado">Estado<span class="req">*</span>:</label>
                        <input id="estado" type="text" class="form-control" formControlName="estado"
                            placeholder="ingresa estado">
                        <span class="campo-obligatorio"
                            *ngIf="domicilio.estado?.errors?.required  && (domicilio.estado?.dirty || domicilio.estado?.touched)">Este
                            campo es obligatorio *.</span>
                    </div>
                </div>
            </ng-container>
        </div>
        <div class="row mt-4">
            <div class="col-md-12">
                <span class="mensaje-inferior-campo-obligatorio">
                    *Campos obligatorios
                </span>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 flex justify-content-end align-items-center">
                <button class="btn btn-md btn-gold" type="button"
                    routerLink="../autenticacion/inicio-sesion">Cancelar</button>
                <button class="btn btn-md btn-primary ml-5" type="button" [disabled]="form.invalid"
                    (click)="registrarContratante()">Registrarme</button>
            </div>
        </div>
    </form>
</div>

<p-dialog [(visible)]="mostrarMensajeError" [modal]="true"
          [style]="{maxWidth:'544px',width: '100%'}"
          [draggable]="false" [resizable]="false" [showHeader]="true" header="">
  <ng-template pTemplate="content">
    <div class="flex flex-column align-items-center justify-content-center">
      <span class="text-justify">{{mensajeError}}</span>
    </div>
  </ng-template>
  <ng-template pTemplate="footer">
    <div class="flex justify-content-center">
      <button class="btn btn-primary btn-md" (click)="mostrarMensajeError = false">Aceptar</button>
    </div>
  </ng-template>
</p-dialog>
