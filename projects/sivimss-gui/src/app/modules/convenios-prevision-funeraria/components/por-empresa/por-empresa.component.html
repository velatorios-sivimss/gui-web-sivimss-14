<ng-container *ngIf="!agregarPersona">
  <hr class="hr-accordion-content">
  <form [formGroup]="empresaForm">
    <div class="row mb-3">
      <div class="col-md-4">
        <label class="control-label" for="nombre">Nombre<span class="req">*</span>:</label>
        <input id="nombre" class="form-control" formControlName="nombre" placeholder="Ingresa nombre" alphanumericOnly
               maxlength="20" (change)="validarFormularioVacio(false,'local')">
        <span class="campo-obligatorio"
              *ngIf="fe.nombre?.errors?.required && (fe.nombre?.dirty || fe.nombre?.touched)">Este campo es obligatorio *.</span>
      </div>
      <div class="col-md-4">
        <label class="control-label" for="razonSocial">Razón social<span class="req">*</span>:</label>
        <input id="razonSocial" class="form-control" formControlName="razonSocial" placeholder="Ingresa razón social"
               maxlength="50" (change)="validarFormularioVacio(false,'local')">
        <span class="campo-obligatorio"
              *ngIf="fe.razonSocial?.errors?.required && (fe.razonSocial?.dirty || fe.razonSocial?.touched)">Este campo es obligatorio *.</span>
      </div>
      <div class="col-md-4">
        <label class="control-label" for="rfc">RFC<span class="req">*</span>:</label>
        <input id="rfc" class="form-control" formControlName="rfc" placeholder="Ingresa RFC" maxlength="13"
               (blur)="consultarRFC()"
               (change)="validarFormularioVacio(false,'local')" (keyup)="convertirMayusculas(0)">
        <span class="campo-obligatorio"
              *ngIf="fe.rfc?.errors?.required && (fe.rfc?.dirty || fe.rfc?.touched)">Este campo es obligatorio *.</span>
      </div>
    </div>
    <h2 class="subtitulo">Dirección</h2>
    <div class="row mt-3 mb-3">
      <div class="col-md-3">
        <label class="control-label" for="numeroInterior">País<span class="req">*</span>:</label>
        <p-dropdown id="pais" class="form-control" formControlName="pais" [options]="pais"
                    placeholder="Selecciona país" [filter]="true" filterBy="label"
                    (change)="validarFormularioVacio(false,'local')">
        </p-dropdown>
        <span class="campo-obligatorio"
              *ngIf="fe.pais?.errors?.required && (fe.pais?.dirty || fe.pais?.touched)">Este campo es obligatorio *.</span>
      </div>
      <div class="col-md-3">
        <label class="control-label" for="cp">C.P.<span class="req">*</span>:</label>
        <input id="cp" class="form-control" formControlName="cp" placeholder="Ingresa C.P." numbersOnly
               maxlength="5" (blur)="consultarCP()">
        <span class="campo-obligatorio"
              *ngIf="fe.cp?.errors?.required && (fe.cp?.dirty || fe.cp?.touched)">Este campo es obligatorio *.</span>
      </div>
      <div class="col-md-3">
        <label class="control-label" for="estado">Estado:</label>
        <input id="estado" class="form-control" formControlName="estado" placeholder="Ingresa estado"
               maxlength="35">
      </div>
      <div class="col-md-3">
        <label class="control-label" for="municipio">Municipio</label>
        <input id="municipio" class="form-control" formControlName="municipio" placeholder="Ingresa municipio">
      </div>
    </div>
    <div class="row mb-3">
      <div class="col-md-3">
        <label class="control-label" for="colonia">Asentamiento / Colonia<span class="req">*</span>:</label>
        <p-dropdown id="colonia" class="form-control" formControlName="colonia" placeholder="Ingresa la colonia"
                    [options]="colonias" [filter]="true" filterBy="label"
                    (change)="validarFormularioVacio(false,'local')">
        </p-dropdown>
        <span class="campo-obligatorio"
              *ngIf="fe.colonia?.errors?.required && (fe.colonia?.dirty || fe.colonia?.touched)">Este campo es obligatorio *.</span>
      </div>
      <div class="col-md-6">
        <label class="control-label" for="calle">Calle<span class="req">*</span>:</label>
        <input id="calle" class="form-control" formControlName="calle" placeholder="Ingresa calle" maxlength="30"
               (change)="validarFormularioVacio(false,'local')">
        <span class="campo-obligatorio"
              *ngIf="fe.calle?.errors?.required && (fe.calle?.dirty || fe.calle?.touched)">Este campo es obligatorio *.</span>
      </div>
      <div class="col-md-3">
        <label class="control-label" for="numeroExterior">Número exterior<span class="req">*</span>:</label>
        <input id="numeroExterior" class="form-control" formControlName="numeroExterior"
               placeholder="Ingresa número exterior"
               maxlength="5" (change)="validarFormularioVacio(false,'local')">
        <span class="campo-obligatorio"
              *ngIf="fe.numeroExterior?.errors?.required && (fe.numeroExterior?.dirty || fe.numeroExterior?.touched)">Este campo es obligatorio *.</span>
      </div>
    </div>
    <div class="row mb-3">
      <div class="col-md-3">
        <label class="control-label" for="numeroInterior">Número interior:</label>
        <input id="numeroInterior" class="form-control" formControlName="numeroInterior"
               placeholder="Ingresa número interior"
               maxlength="4">
        <span class="campo-obligatorio"
              *ngIf="fe.numeroInterior?.errors?.required && (fe.numeroInterior?.dirty || fe.numeroInterior?.touched)">Este campo es obligatorio *.</span>
      </div>
    </div>
    <h2 class="subtitulo">Contacto</h2>
    <div class="row mt-3 mb-3">
      <div class="col-md-6">
        <label class="control-label" for="correoElectronico">Correo electrónico:</label>
        <input id="correoElectronico" class="form-control" formControlName="correoElectronico"
               placeholder="Ingresa correo electrónico"
               maxlength="35" (change)="validarFormularioVacio(false,'local')" (keyup)="convertirMinusculas(0)"
               (blur)="validarCorreoElectornico()">
      </div>
      <div class="col-md-6">
        <label class="control-label" for="numeroInterior">Teléfono<span class="req">*</span>:</label>
        <input id="telefono" class="form-control" formControlName="telefono" placeholder="Ingresa teléfono"
               maxlength="10" numbersOnly (change)="validarFormularioVacio(false,'local')">
        <span class="campo-obligatorio"
              *ngIf="fe.telefono?.errors?.required && (fe.telefono?.dirty || fe.telefono?.touched)">Este campo es obligatorio *.</span>
      </div>
    </div>
    <section class="mt-6">
      <div class="flex justify-content-between align-items-center mb-3">
        <h2 class="subtitulo">Personas de esta empresa</h2>
        <button type="button" class="ml-4 btn btn-primary btn-lg" (click)="agregarPersonaSolicitante()" routerLink="agregar-persona">
          Agregar persona
        </button>
      </div>
      <ng-container *ngIf="personasConvenio.length < 1">
        <div class="px-4">
          <div class="px-4 py-6 mt-5 border-panel flex justify-content-center">
            <span class="mensaje-agregar-funcionalidad">Agrega personas a esta empresa</span>
          </div>
        </div>
      </ng-container>
      <ng-container class="my-4" *ngIf="personasConvenio.length > 0">
        <app-table-panel>
          <ng-template appCustomTemplate="left-header">
            <div class="table-panel-header-column">
              <span class="font-bold">Nombre</span>
            </div>
          </ng-template>
          <div *ngFor="let personaElement of personasConvenio" class="row py-2 px-4 table-panel-row">
            <div class="col-md-10">
              <span> {{personaElement.nombre}} {{personaElement.primerApellido}} {{personaElement.segundoApellido}} </span>
            </div>
          </div>
        </app-table-panel>
      </ng-container>
    </section>
  </form>
</ng-container>
<p-dialog [(visible)]="confirmarRedireccionamiento" [modal]="true"
          [style]="{maxWidth:'544px',width: '100%'}"
          [draggable]="false" [resizable]="false" [showHeader]="true" header="">
  <ng-template pTemplate="content">
    <div class="flex flex-column align-items-center justify-content-center">
      <span class="text-justify">La CURP/RFC que deseas ingresar ya se encuentra registrada en el sistema. </span>
    </div>
  </ng-template>
  <ng-template pTemplate="footer">
    <div class="flex justify-content-center">
      <button type="submit" class="btn btn-primary btn-md" (click)="redireccionarModificar()">Aceptar</button>
    </div>
  </ng-template>
</p-dialog>
