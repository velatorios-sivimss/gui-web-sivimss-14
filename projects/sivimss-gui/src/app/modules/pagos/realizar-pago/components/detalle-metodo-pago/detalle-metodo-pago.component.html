<div class="grid">
  <app-btn-regresar class="mr-2 mt-5 col-fixed border-return-button" [routerLink]="'../../'"></app-btn-regresar>
  <app-titulo-principal [titulo]="titulo" class="col"></app-titulo-principal>
</div>

<div class="border-panel mb-5">
  <div class="row flex border-panel mx-0 bg-g mb-5">
    <div class="col-12">
      <div class="row grid">
        <div class="col">
          <span class="flex flex-column etiqueta-base">Estatus</span>
          <span class="flex flex-column etiqueta-base font-bold">{{registroPago.estatusPago}}</span>
        </div>
        <div class="col">
          <span class="flex flex-column etiqueta-base">Folio</span>
          <span class="flex flex-column etiqueta-base font-bold">{{registroPago.folio}}</span>
        </div>
        <div class="col">
          <span class="flex flex-column etiqueta-base">Tipo de pago</span>
          <span class="flex flex-column etiqueta-base font-bold">{{tipoPago}}</span>
        </div>
      </div>
    </div>
  </div>

  <div class="row flex border-panel mx-0">
    <div class="col-md-12">
      <div class="row grid">
        <div class="col">
          <span class="flex flex-column texto-base font-bold p28">{{registroPago.totalAPagar | currency}}</span>
          <span class="flex flex-column etiqueta-base">Total a pagar</span>
        </div>
        <div class="col">
          <span class="flex flex-column texto-base font-bold p28">{{registroPago.totalPagado | currency}}</span>
          <span class="flex flex-column etiqueta-base">Total Pagado</span>
        </div>
        <div class="col font-17">
          <span class="flex flex-column texto-base font-bold p28">{{ registroPago.totalPorCubrir | currency }}</span>
          <span class="flex flex-column etiqueta-base">Diferencia entre total a pagar y total pagado</span>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="border-panel">
  <h2 class="subtitulo pt-4 pb-4">Datos de pago</h2>
  <p-accordion styleClass="sivimss-accordion sivimss-accordionColor">
    <p-accordionTab *ngFor="let pago of registroPago.metodosPago">
      <ng-template pTemplate="header">
        <div class="sivimss-acoordion-header">
          <div class="accordion-header-left font-bold font-14">
            {{pago.metodoPago}}
          </div>
          <div class="accordion-header-right">
            <div class="estatus">
              <span>Importe</span>
              <b>{{pago.importe | currency}}</b>
            </div>
          </div>
        </div>
      </ng-template>
      <ng-template pTemplate="content">
        <div class="row grid">
          <div class="col">
            <span class="flex flex-column texto-base">Fecha de pago</span>
            <span class="flex flex-column etiqueta-base">{{pago.fechaPago | date:'dd/MM/YYYY'}}</span>
          </div>
          <div class="col">
            <span class="flex flex-column texto-base">Número de Autorización</span>
            <span class="flex flex-column etiqueta-base">{{pago.numAutorizacion}}</span>
          </div>
          <div class="col">
            <span class="flex flex-column texto-base">Nombre del banco</span>
            <span class="flex flex-column etiqueta-base">{{pago.nomBanco}}</span>
          </div>
          <div class="col">
            <span class="flex flex-column texto-base">Total a pagar</span>
            <span class="flex flex-column etiqueta-base">{{registroPago.totalAPagar | currency}}</span>
          </div>
          <div class="col">
            <span class="flex flex-column texto-base">Tipo de Pago</span>
            <span class="flex flex-column etiqueta-base">{{pago.metodoPago}}</span>
          </div>
        </div>
      </ng-template>
    </p-accordionTab>
  </p-accordion>
</div>

<div class="flex mb-4 justify-content-end">
  <button class="ml-6 mt-3 btn btn-primary btn-md" [routerLink]="'./../..'">
    Regresar
  </button>
</div>

<p-overlayPanel #overlayPanel>
  <ng-template pTemplate="content">
    <app-overlay-panel-opciones>
      <app-overlay-panel-opcion class="text-center" titulo="Ir a Pago" *ngIf="registroPago.estatusPago !== 'Pagado'"
                                (click)="redireccionPago()">
      </app-overlay-panel-opcion>
      <app-overlay-panel-opcion class="text-center" titulo="Modificar método de pago"
                                *ngIf="registroPago.estatusPago === 'Pagado'"
                                [routerLink]="['../../modificar-metodo-de-pago', idPagoBitacora]">
      </app-overlay-panel-opcion>
    </app-overlay-panel-opciones>
  </ng-template>
</p-overlayPanel>
