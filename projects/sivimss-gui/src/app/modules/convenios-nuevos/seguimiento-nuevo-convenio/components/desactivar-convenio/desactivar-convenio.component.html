<app-titulo-principal titulo="Desactivar convenio"></app-titulo-principal>

<ng-container [ngSwitch]="tipoConvenio">
  <ng-container *ngSwitchCase="'1'">
    <app-convenio-header [tipoContratacion]="'Por persona'"
                         [numeroFolio]="titularPA.folioConvenio"></app-convenio-header>
    <p-accordion styleClass="sivimss-accordion mt-3">
      <p-accordionTab>
        <ng-template pTemplate="header">
          <div class="flex justify-content-between align-items-center flex-1">
            <span>Datos del titular</span>
          </div>
        </ng-template>
        <ng-template pTemplate="content">
          <app-resumen-titular-beneficiario [matricula]="titularPA.matricula" [rfc]="titularPA.rfc"
                                            [curp]="titularPA.curp" [nombre]="titularPA.nombre"
                                            [nss]="titularPA.nss" [primerApellido]="titularPA.primerApellido"
                                            [segundoApellido]="titularPA.segundoApellido"
                                            [calle]="titularPA.calle" [numeroExterior]="titularPA.numExt"
                                            [numeroInterior]="titularPA.numInt" [codigoPostal]="titularPA.cp"
                                            [colonia]="titularPA.colonia" [municipio]="titularPA.municipio"
                                            [estado]="titularPA.estado" [paisNacimiento]="titularPA.pais"
                                            [lugarNacimiento]="titularPA.lugarNac"
                                            [correoElectronico]="titularPA.correo"
                                            [telefonoCelular]="titularPA.telCelular" [telefonoFijo]="titularPA.telFijo"
                                            [tipoPaquete]="titularPA.nomPaquete" [numeroPagos]="titularPA.numPagos"
          ></app-resumen-titular-beneficiario>
        </ng-template>
      </p-accordionTab>
    </p-accordion>
    <p-accordion styleClass="sivimss-accordion mt-3">
      <p-accordionTab>
        <ng-template pTemplate="header">
          <div class="flex justify-content-between align-items-center flex-1">
            <span>Datos de titular substituto</span>
          </div>
        </ng-template>
        <ng-template pTemplate="content">
          <label class="control-label">Son los mismos que el titular</label>
          <div class="flex">
            <div class="flex align-items-center mx-2">
              <p-radioButton [inputId]="'titularSi'" name="titular" [value]="true"
                             formControlName="titular"></p-radioButton>
              <label class="control-label m-0 mx-3" [for]="'titularSi'">Sí</label>
            </div>
            <div class="flex align-items-center mx-2">
              <p-radioButton [inputId]="'titularNo'" name="titular" [value]="false"
                             formControlName="titular"></p-radioButton>
              <label class="control-label m-0 mx-3" [for]="'titularNo'">No</label>
            </div>
          </div>
          <app-resumen-titular-beneficiario [titular]="'beneficiario'"></app-resumen-titular-beneficiario>
        </ng-template>
      </p-accordionTab>
    </p-accordion>
    <p-accordion styleClass="sivimss-accordion mt-3">
      <p-accordionTab>
        <ng-template pTemplate="header">
          <div class="flex justify-content-between align-items-center flex-1">
            <span>Datos del beneficiario 1</span>
          </div>
        </ng-template>
        <ng-template pTemplate="content">
          <ng-container *ngIf="titularPA.beneficiario1 else SinBeneficiarioEspecifico">
            <app-resumen-titular-beneficiario [titular]="'beneficiario'" [matricula]="beneficiario1.matricula"
                                              [rfc]="beneficiario1.rfc"
                                              [curp]="beneficiario1.curp" [nombre]="beneficiario1.nombre"
                                              [nss]="beneficiario1.nss" [primerApellido]="beneficiario1.primerApellido"
                                              [segundoApellido]="beneficiario1.segundoApellido"
                                              [calle]="beneficiario1.calle" [numeroExterior]="beneficiario1.numExt"
                                              [numeroInterior]="beneficiario1.numInt" [codigoPostal]="beneficiario1.cp"
                                              [colonia]="beneficiario1.colonia" [municipio]="beneficiario1.municipio"
                                              [estado]="beneficiario1.estado"
                                              [lugarNacimiento]="beneficiario1.lugarNac"
                                              [correoElectronico]="beneficiario1.correo"
                                              [telefono]="beneficiario1.telCelular"
            ></app-resumen-titular-beneficiario>
          </ng-container>
        </ng-template>
      </p-accordionTab>
    </p-accordion>
    <p-accordion styleClass="sivimss-accordion mt-3">
      <p-accordionTab>
        <ng-template pTemplate="header">
          <div class="flex justify-content-between align-items-center flex-1">
            <span>Datos del beneficiario 2</span>
          </div>
        </ng-template>
        <ng-template pTemplate="content">
          <ng-container *ngIf="titularPA.beneficiario2 else SinBeneficiarioEspecifico">
            <app-resumen-titular-beneficiario [titular]="'beneficiario'"  [matricula]="beneficiario2.matricula"
                                              [rfc]="beneficiario2.rfc"
                                              [curp]="beneficiario2.curp" [nombre]="beneficiario2.nombre"
                                              [nss]="beneficiario2.nss" [primerApellido]="beneficiario2.primerApellido"
                                              [segundoApellido]="beneficiario2.segundoApellido"
                                              [calle]="beneficiario2.calle" [numeroExterior]="beneficiario2.numExt"
                                              [numeroInterior]="beneficiario2.numInt" [codigoPostal]="beneficiario2.cp"
                                              [colonia]="beneficiario2.colonia" [municipio]="beneficiario2.municipio"
                                              [estado]="beneficiario2.estado"
                                              [lugarNacimiento]="beneficiario2.lugarNac"
                                              [correoElectronico]="beneficiario2.correo"
                                              [telefono]="beneficiario2.telCelular"></app-resumen-titular-beneficiario>
          </ng-container>
        </ng-template>
      </p-accordionTab>
    </p-accordion>
    <p-accordion styleClass="sivimss-accordion mt-3">
      <p-accordionTab>
        <ng-template pTemplate="header">
          <div class="flex justify-content-between align-items-center flex-1">
            <span>Promotor</span>
          </div>
        </ng-template>
        <ng-template pTemplate="content">
          <label class="control-label">¿El servicio fue gestionado por un promotor? *</label>
          <div class="flex">
            <div class="flex align-items-center mx-2">
              <p-radioButton [inputId]="'promotorSi'" name="promotor" [value]="true"
                             formControlName="promotor"></p-radioButton>
              <label class="control-label m-0 mx-3" [for]="'promotorSi'">Sí</label>
            </div>
            <div class="flex align-items-center mx-2">
              <p-radioButton [inputId]="'promotorNo'" name="promotor" [value]="false"
                             formControlName="promotor"></p-radioButton>
              <label class="control-label m-0 mx-3" [for]="'promotorNo'">No</label>
            </div>
          </div>

        </ng-template>
      </p-accordionTab>
    </p-accordion>
  </ng-container>

  <ng-container *ngSwitchCase="'2'">
    <app-convenio-header [tipoContratacion]="'Grupo o Empresa'"
                         [numeroFolio]="convenioEmpresa.folioConvenio"></app-convenio-header>
    <p-accordion styleClass="sivimss-accordion mt-3">
      <p-accordionTab>
        <ng-template pTemplate="header">
          <div class="flex justify-content-between align-items-center flex-1">
            <span>Grupo o Empresa</span>
          </div>
        </ng-template>
        <ng-template pTemplate="content">
          <app-resumen-empresa [nombre]="convenioEmpresa.nombre" [razonSocial]="convenioEmpresa.razonSocial"
                               [rfc]="convenioEmpresa.rfc" [correoElectronico]="convenioEmpresa.correo"
                               [codigoPostal]="convenioEmpresa.cp" [pais]="convenioEmpresa.pais"
                               [estado]="convenioEmpresa.estado" [municipio]="convenioEmpresa.municipio"
                               [colonia]="convenioEmpresa.colonia"
                               [numeroInterior]="convenioEmpresa.numInterior"
                               [numeroExterior]="convenioEmpresa.numExterior"
                               [calle]="convenioEmpresa.calle"
                               [telefono]="convenioEmpresa.telefono"></app-resumen-empresa>
        </ng-template>
      </p-accordionTab>
    </p-accordion>
    <p-accordion styleClass="sivimss-accordion mt-3">
      <p-accordionTab>
        <ng-template pTemplate="header">
          <div class="flex justify-content-between align-items-center flex-1">
            <span>Solicitantes del Grupo o Empresa</span>
          </div>
        </ng-template>
        <ng-template pTemplate="content">
        </ng-template>
      </p-accordionTab>
    </p-accordion>
  </ng-container>

  <ng-container *ngSwitchCase="'3'">
    <app-convenio-header [tipoContratacion]="'Por persona'"
                         [numeroFolio]="convenioPersona?.folioConvenio?.toString() ?? ''"></app-convenio-header>
    <p-accordion styleClass="sivimss-accordion mt-3">
      <p-accordionTab>
        <ng-template pTemplate="header">
          <div class="flex justify-content-between align-items-center flex-1">
            <span>Datos de la persona</span>
          </div>
        </ng-template>
        <ng-template pTemplate="content">
          <app-resumen-persona [matricula]="convenioPersona.matricula" [rfc]="convenioPersona.rfc"
                               [curp]="convenioPersona.curp" [nombre]="convenioPersona.nombre"
                               [primerApellido]="convenioPersona.primerApellido"
                               [segundoApellido]="convenioPersona.segundoApellido" [calle]="convenioPersona.calle"
                               [numeroExterior]="convenioPersona.numExt"
                               [numeroInterior]="convenioPersona.numInt" [codigoPostal]="convenioPersona.cp.toString()"
                               [colonia]="convenioPersona.colonia" [municipio]="convenioPersona.municipio"
                               [estado]="convenioPersona.estado" [nacionalidad]="''"
                               [paisNacimiento]="convenioPersona.pais"
                               [lugarNacimiento]="convenioPersona.lugarNac" [correoElectronico]="convenioPersona.correo"
                               [telefono]="convenioPersona.telFijo ?? convenioPersona.telCelular" [enfermedad]="''"
          ></app-resumen-persona>
        </ng-template>
      </p-accordionTab>
    </p-accordion>
    <p-accordion styleClass="sivimss-accordion mt-3">
      <p-accordionTab>
        <ng-template pTemplate="header">
          <div class="flex justify-content-between align-items-center flex-1">
            <span>Características del convenio</span>
          </div>
        </ng-template>
        <ng-template pTemplate="content">
          <div class="row table-panel-row">
            <div class="col-md-4">
              <div class="table-panel-column">
                <label>Tipo de paquete</label>
                <span>Sencillo</span>
              </div>
            </div>
          </div>
        </ng-template>
      </p-accordionTab>
    </p-accordion>
    <p-accordion styleClass="sivimss-accordion mt-3">
      <p-accordionTab>
        <ng-template pTemplate="header">
          <div class="flex justify-content-between align-items-center flex-1">
            <span>Beneficiarios</span>
          </div>
        </ng-template>
        <ng-template pTemplate="content" *ngIf="beneficiarios.length > 0 else SinBeneficiarios">
          <ng-container *ngFor="let beneficiario of beneficiarios">
            <p-accordion styleClass="sivimss-accordion sivimss-accordionColor mb-5" [activeIndex]="0">
              <p-accordionTab
                [header]="beneficiario.nombre + ' ' + beneficiario.primerApellido + ' ' + beneficiario.segundoApellido">
                <app-resumen-beneficiario
                  [nombre]="beneficiario.nombre + ' ' + beneficiario.primerApellido + ' ' + beneficiario.segundoApellido"
                  [telefono]="beneficiario.telCelular" [curp]="beneficiario.curp" [rfc]="beneficiario.rfc"
                  [correoElectronico]="beneficiario.correo"></app-resumen-beneficiario>
              </p-accordionTab>
            </p-accordion>
          </ng-container>
        </ng-template>
      </p-accordionTab>
    </p-accordion>
    <p-accordion styleClass="sivimss-accordion mt-3">
      <p-accordionTab>
        <ng-template pTemplate="header">
          <div class="flex justify-content-between align-items-center flex-1">
            <span>Documentación requerida</span>
          </div>
        </ng-template>
        <ng-template pTemplate="content" *ngIf="beneficiarios.length > 0 else SinBeneficiarios">
        </ng-template>
      </p-accordionTab>
    </p-accordion>
  </ng-container>
</ng-container>

<div class="row mt-3 mb-2">
  <div class="col-md-12 mt-4">
    <p class="mensaje-cancelacion-orden">¿Está seguro de desactivar el registro seleccionado?</p>
  </div>
  <div class="col-md-12 flex justify-content-end mt-6 mb-4">
    <button type="submit" class="btn btn-default btn-md" routerLink="./../../../">Cancelar</button>
    <button type="submit" class="btn btn-primary btn-md ml-5" routerLink="../" (click)="aceptar()">Aceptar</button>
  </div>
</div>

<ng-template pTemplate="content" #SinBeneficiarios>
  <div class="row table-panel-row" *ngIf="beneficiarios.length === 0">
    <div class="col-md-12 mt-4">
      <p class="mensaje-cancelacion-orden font-14">El convenio no tiene beneficiarios registrados.</p>
    </div>
  </div>
</ng-template>

<ng-template pTemplate="content" #SinBeneficiarioEspecifico>
  <div class="row table-panel-row" *ngIf="beneficiarios.length === 0">
    <div class="col-md-12 mt-4">
      <p class="mensaje-cancelacion-orden font-14">Información de beneficiario no registrada.</p>
    </div>
  </div>
</ng-template>
